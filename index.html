<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gregorio Pedrini | Vertical Adventures</title>
    <meta name="description" content="Alpinismo, Arrampicata e Trekking con Gregorio Pedrini.">
    <link rel="canonical" href="https://gregoriopedrini.com/">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Caricamento Dati e Logica da GitHub -->
    <script src="https://raw.githubusercontent.com/gregoriopedrini/Montagna/main/dati.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        
        :root {
            --brand-color: #17a2ad;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
        }

        .category-card {
            transition: transform 0.2s, filter 0.2s;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .category-card:active {
            transform: scale(0.98);
        }

        details summary::-webkit-details-marker { display: none; }
        details[open] summary i.fa-chevron-down { transform: rotate(180deg); }

        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .back-btn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .gradient-card {
            background: linear-gradient(145deg, #1e293b, #0f172a);
            border: 1px solid #334155;
            transition: all 0.2s ease;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="w-full py-6 bg-slate-900/90 border-b border-slate-800 shadow-xl sticky top-0 z-40 backdrop-blur-md">
        <div class="max-w-md mx-auto text-center px-4 flex items-center justify-between">
            <div class="flex items-center gap-4" onclick="showPage('home')" style="cursor: pointer;">
                <div class="relative w-12 h-12">
                    <img id="header-img" src="" class="w-full h-full rounded-full object-cover border-2 border-[#17a2ad]" onerror="this.src='https://via.placeholder.com/150'">
                </div>
                <div class="text-left">
                    <h1 class="text-sm font-black uppercase tracking-tighter leading-none">Gregorio Pedrini</h1>
                    <p class="text-[#17a2ad] text-[8px] font-bold uppercase tracking-[0.2em]">Vertical Adventures</p>
                </div>
            </div>
            <a href="https://www.instagram.com/gregpedrini/" target="_blank" class="text-slate-400 hover:text-[#17a2ad]">
                <i class="fa-brands fa-instagram text-2xl"></i>
            </a>
        </div>
    </header>

    <main id="app-container" class="max-w-md mx-auto px-4 py-6 flex-grow w-full pb-24"></main>

    <div id="back-button-container" class="hidden">
        <button onclick="showPage('home')" class="back-btn bg-slate-800/80 text-white px-6 py-3 rounded-full border border-slate-600 shadow-2xl flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:bg-[#17a2ad] transition-colors">
            <i class="fa-solid fa-arrow-left"></i> Home
        </button>
    </div>

    <footer class="max-w-md mx-auto mt-auto text-center px-4 py-6 border-t border-slate-800/50">
        <p class="text-slate-600 text-[9px] uppercase tracking-widest">
            &copy; 2026 Gregorio Pedrini
        </p>
    </footer>

    <script>
        // --- LOGICA DI NAVIGAZIONE E RENDERING ---
        const app = document.getElementById('app-container');
        const backBtn = document.getElementById('back-button-container');
        const WHATSAPP = "393205586883";

        // Inizializzazione al caricamento
        window.onload = function() {
            // Verifica se i dati esterni sono stati caricati
            if (typeof BIO !== 'undefined') {
                const headerImg = document.getElementById('header-img');
                if(headerImg) headerImg.src = BIO.img;
            }
            showPage('home');
        };

        function showPage(pageId, categoryFilter = null) {
            app.innerHTML = ''; 
            window.scrollTo(0,0);
            if (pageId === 'home') {
                renderHome();
                backBtn.classList.add('hidden');
            } else if (pageId === 'bio') {
                renderBio();
                backBtn.classList.remove('hidden');
            } else if (pageId === 'list') {
                renderList(categoryFilter);
                backBtn.classList.remove('hidden');
            }
        }

        function renderHome() {
            const mainColor = (typeof COLORI !== 'undefined') ? COLORI.main : "#17a2ad";
            
            app.innerHTML = `
                <div class="fade-in space-y-4">
                    <div onclick="showPage('bio')" class="bg-slate-800 p-4 rounded-2xl flex items-center justify-between cursor-pointer border border-slate-700 hover:border-[#17a2ad] transition-all">
                        <span class="font-bold uppercase tracking-widest text-sm">Chi Sono</span>
                        <i class="fa-solid fa-user-astronaut text-[#17a2ad]"></i>
                    </div>
                    <div onclick="showPage('list', 'calendario')" class="relative overflow-hidden bg-gradient-to-r from-[#17a2ad] to-[#12818a] p-6 rounded-3xl cursor-pointer shadow-lg shadow-[#17a2ad33] group">
                        <div class="relative z-10 flex items-center justify-between">
                            <div>
                                <h2 class="text-white font-black text-xl uppercase italic tracking-tighter">Calendario<br>Uscite</h2>
                                <p class="text-white/80 text-[10px] uppercase font-bold mt-1">Eventi 2026</p>
                            </div>
                            <i class="fa-regular fa-calendar-check text-4xl text-white/20 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>
                    <div onclick="prenotaPersonalizzata()" class="border-2 border-dashed border-[#17a2ad]/50 p-4 rounded-2xl text-center cursor-pointer hover:bg-[#17a2ad]/10 transition-colors">
                        <p class="text-[#17a2ad] font-bold uppercase text-xs tracking-widest mb-1"><i class="fa-solid fa-wand-magic-sparkles mr-2"></i>Uscita Su Misura</p>
                        <p class="text-slate-500 text-[10px]">Realizziamo il tuo obiettivo.</p>
                    </div>
                    <div class="h-px bg-slate-800 w-full my-6"></div>
                    <div class="grid grid-cols-1 gap-3">
                        ${renderCategoryBanner("Alpinismo", "alpinismo", (typeof COLORI !== 'undefined' ? COLORI.marrone : "#695d46"), "fa-snowflake")}
                        ${renderCategoryBanner("Vie Lunghe", "vie-lunghe", (typeof COLORI !== 'undefined' ? COLORI.arancione : "#ff5e0e"), "fa-mountain")}
                        ${renderCategoryBanner("Didattica", "didattica", (typeof COLORI !== 'undefined' ? COLORI.azzurro : "#a3e7d9"), "fa-graduation-cap", "text-slate-800")}
                        ${renderCategoryBanner("Ferrate", "ferrate", (typeof COLORI !== 'undefined' ? COLORI.begino : "#cfc194"), "fa-layer-group", "text-slate-800")}
                    </div>
                </div>
            `;
        }

        function renderCategoryBanner(label, catId, bgColor, icon, textColor = "text-white") {
            return `<div onclick="showPage('list', '${catId}')" class="${textColor} p-5 rounded-2xl category-card flex items-center justify-between shadow-md" style="background-color: ${bgColor}">
                <span class="font-black uppercase tracking-tighter text-lg">${label}</span>
                <i class="fa-solid ${icon} text-xl opacity-80"></i>
            </div>`;
        }

        function renderList(category) {
            if (typeof ATTIVITA === 'undefined') return;
            const items = ATTIVITA.filter(item => item.categoria === category);
            let pageTitle = category === 'calendario' ? "Prossime Uscite" : category.toUpperCase();
            const mainColor = (typeof COLORI !== 'undefined') ? COLORI.main : "#17a2ad";
            
            let html = `<div class="fade-in space-y-6"><h2 class="text-xl font-black uppercase tracking-tighter text-white border-l-4 border-[#17a2ad] pl-3">${pageTitle}</h2>`;

            if (items.length === 0) {
                html += `<div class="text-center py-10 text-slate-500 text-sm">Contattami per disponibilit√† in questa categoria.</div>`;
            } else {
                items.forEach(item => {
                    html += `
                    <div class="gradient-card p-6 rounded-3xl relative overflow-hidden" style="border-left: 4px solid ${item.img_bck_color || mainColor}">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex-1">
                                ${item.badge ? `<span class="bg-emerald-500/20 text-emerald-400 text-[9px] px-2 py-1 rounded font-bold uppercase mb-2 inline-block">${item.badge}</span>` : ''}
                                <h3 class="text-xl font-black mt-1 uppercase tracking-tighter leading-tight">${item.titolo}</h3>
                                <p class="text-slate-400 text-[10px] mt-1 uppercase font-bold italic">${item.sottotitolo}</p>
                            </div>
                            ${item.data ? `
                            <div class="bg-slate-900 p-2 rounded-xl text-center min-w-[60px] border border-slate-700 shadow-inner">
                                <p class="text-sm font-black text-white leading-none mb-1">${item.data.split(' ')[0]}</p>
                                <p class="text-[9px] uppercase font-black" style="color: ${item.img_bck_color || mainColor}">${item.data.split(' ')[1] || ''}</p>
                            </div>` : ''}
                        </div>

                        <div class="bg-slate-900/50 rounded-2xl p-4 mb-4 space-y-2 border border-slate-700/50">
                            ${item.prezzo_partecipante ? `
                                <div class="flex justify-between text-[10px] uppercase tracking-wider font-bold">
                                    <span class="text-[#17a2ad]">Quota:</span>
                                    <span class="text-white">${item.prezzo_partecipante}</span>
                                </div>
                            ` : `
                                <div class="flex justify-between text-[10px] uppercase tracking-wider font-bold">
                                    <span class="text-slate-400">1 Persona:</span>
                                    <span class="text-white">${item.prezzo_1 || 'Privata'}</span>
                                </div>
                                <div class="flex justify-between text-[10px] uppercase tracking-wider font-bold">
                                    <span class="text-slate-400">2 Persone:</span>
                                    <span class="text-white">${item.prezzo_2 || 'N/D'}</span>
                                </div>
                            `}
                        </div>

                        <details class="mb-4 group">
                            <summary class="list-none cursor-pointer flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-white transition-colors">
                                <i class="fa-solid fa-chevron-down transition-transform"></i> Dettagli
                            </summary>
                            <div class="mt-4 p-4 bg-slate-900/50 rounded-2xl border border-slate-700 text-[11px] leading-relaxed text-slate-300 space-y-2">
                                <p><strong class="text-white uppercase text-[9px]">Materiale:</strong> ${item.materiale}</p>
                                <p>${item.descrizione}</p>
                            </div>
                        </details>

                        <button onclick="prenota('${item.titolo}')" class="w-full py-4 rounded-2xl font-black text-white text-[11px] uppercase tracking-[0.2em] flex items-center justify-center gap-3 transition-all active:scale-95 shadow-lg" style="background-color: ${item.img_bck_color || mainColor}">
                            <i class="fa-brands fa-whatsapp text-lg"></i> Prenota
                        </button>
                    </div>`;
                });
            }
            app.innerHTML = html + `</div>`;
        }

        function renderBio() {
            if (typeof BIO === 'undefined') return;
            app.innerHTML = `
                <div class="fade-in text-center">
                    <div class="w-32 h-32 mx-auto mb-6 relative">
                        <img src="${BIO.img}" class="w-full h-full rounded-full object-cover border-4 border-[#17a2ad] shadow-2xl">
                    </div>
                    <h2 class="text-2xl font-black uppercase text-white mb-4">Chi Sono</h2>
                    <div class="bg-slate-800 p-6 rounded-3xl border border-slate-700 text-slate-300 text-sm leading-relaxed text-left">
                        <p>${BIO.descrizione}</p>
                    </div>
                    <div class="mt-8">
                        <button onclick="prenotaPersonalizzata()" class="bg-[#17a2ad] text-white px-8 py-3 rounded-full font-bold uppercase tracking-widest shadow-lg">Scrivimi</button>
                    </div>
                </div>
            `;
        }

        function prenota(titolo) {
            const msg = `Ciao Gregorio! Vorrei informazioni per: ${titolo}`;
            window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function prenotaPersonalizzata() {
            const msg = `Ciao Gregorio! Vorrei organizzare un'uscita personalizzata.`;
            window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`, '_blank');
        }
    </script>
</body>
</html>
